#!/bin/bash
#PBS -l select={nodes}:ncpus={tasks_per_node}
#PBS -l walltime={walltime}
#PBS -j oe
#PBS -P {partition}
#PBS -q general
#PBS -N {job_name}

source $HOME/.bashrc
cd $PBS_O_WORKDIR
cat $PBS_NODEFILE | sort | uniq | while read line; do echo ${line}":{procs_per_node}"; done > hostfile

mpiexec -machinefile hostfile -n {nproc} python3 run_openmc.py {openmc_args}
